actions:

    # Fetch dependencies (crates).
    - cargo_fetch:
        command: |
            cargo fetch --target %(rust_host_platform)

    # Build release-quality artifacts in offine mode. Deps must've been downloaded before.
    - cargo_build:
        command: |
            cargo build --target %(rust_host_platform) --release --offline -j %(jobs)

    # NOTE: There is no `cargo_install` command, because it's not a
    # `make install` equivalent. It' supposed to install artifacts into
    # cargo's own toolset, addressed at developers. You'll have to move files yourself.

    # Test the release-quality artifacts.
    - cargo_check:
        command: |
            cargo test --target %(rust_host_platform) --release --offline -j %(jobs) -- --test-threads=%(jobs)
